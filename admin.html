<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DEV WITE • Admin</title>

<style>
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont}
body{
  margin:0;
  min-height:100vh;
  background:linear-gradient(180deg,#05070c,#0a0f1c);
  color:#e5e7eb;
}
.wrap{
  max-width:520px;
  margin:40px auto;
  padding:16px;
}
.card{
  background:#0b1220;
  border-radius:20px;
  padding:20px;
  box-shadow:0 30px 80px rgba(0,0,0,.7);
}
h1{
  margin:0;
  text-align:center;
  color:#3b82f6;
}
.sub{
  text-align:center;
  color:#9ca3af;
  font-size:13px;
  margin-bottom:16px;
}
input,button{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:none;
  font-size:15px;
}
input{
  background:#020617;
  color:#e5e7eb;
  margin-bottom:10px;
}
button{
  font-weight:700;
  cursor:pointer;
}
.blue{background:#2563eb;color:#fff}
.red{background:#dc2626;color:#fff}
.gray{background:#1f2937;color:#e5e7eb}
.row{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
.sep{
  height:1px;
  background:#1f2937;
  margin:16px 0;
}
.list{
  margin-top:10px;
}
.item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px 0;
  border-bottom:1px solid #1f2937;
  font-size:14px;
}
.bad{color:#f87171}
.good{color:#4ade80}
.tag{
  font-size:11px;
  padding:4px 8px;
  border-radius:999px;
  background:#020617;
}
.hide{display:none}
.footer{
  text-align:center;
  font-size:12px;
  color:#9ca3af;
  margin-top:10px;
}
</style>
</head>

<body>
<div class="wrap">

<!-- LOGIN -->
<div id="login" class="card">
  <h1>DEV WITE</h1>
  <div class="sub">Admin Panel</div>

  <input id="adminUser" placeholder="Admin user">
  <input id="adminPass" type="password" placeholder="Admin password">
  <button class="blue" onclick="login()">Đăng nhập</button>
</div>

<!-- PANEL -->
<div id="panel" class="card hide">
  <h1>Quản lý User</h1>
  <div class="sub">Cấp / gia hạn / thu hồi Change Pass</div>

  <input id="phone" placeholder="Số điện thoại user">
  <input id="days" type="number" placeholder="Số ngày cấp / cộng thêm">

  <div class="row">
    <button class="blue" onclick="grant()">Cấp / Gia hạn</button>
    <button class="red" onclick="revoke()">Thu hồi</button>
  </div>

  <div class="sep"></div>

  <div class="list" id="list"></div>

  <div class="footer">
    Dữ liệu lưu local • Không backend
  </div>
</div>

</div>

<script>
/* ===== CONFIG ADMIN (ĐỔI Ở ĐÂY) ===== */
const ADMIN_USER = "admin";
const ADMIN_PASS = "nam16127@";

/* ===== STORAGE ===== */
const KEY = "DEVWITE_USERS";

function getUsers(){
  return JSON.parse(localStorage.getItem(KEY) || "{}");
}
function saveUsers(u){
  localStorage.setItem(KEY, JSON.stringify(u));
}

/* ===== LOGIN ===== */
function login(){
  const u = adminUser.value;
  const p = adminPass.value;
  if(u === ADMIN_USER && p === ADMIN_PASS){
    loginBox(false);
    render();
  } else {
    alert("Sai tài khoản admin");
  }
}
function loginBox(show){
  document.getElementById("login").classList.toggle("hide", !show);
  document.getElementById("panel").classList.toggle("hide", show);
}

/* ===== DATE UTIL ===== */
function addDays(cur, days){
  const d = cur ? new Date(cur) : new Date();
  d.setDate(d.getDate() + days);
  return d.toISOString().slice(0,10);
}

/* ===== ACTION ===== */
function grant(){
  const phone = phoneInput();
  const days = parseInt(daysInput());
  if(!phone || !days) return alert("Thiếu thông tin");

  const users = getUsers();
  const cur = users[phone]?.expire;
  users[phone] = { expire: addDays(cur, days) };
  saveUsers(users);
  render();
}
function revoke(){
  const phone = phoneInput();
  const users = getUsers();
  if(!users[phone]) return alert("User không tồn tại");
  delete users[phone];
  saveUsers(users);
  render();
}

/* ===== VIEW ===== */
function render(){
  const users = getUsers();
  const box = document.getElementById("list");
  box.innerHTML = "<b>Danh sách user</b>";

  Object.keys(users).forEach(p=>{
    const exp = users[p].expire;
    const ok = new Date(exp) > new Date();
    box.innerHTML += `
      <div class="item">
        <div>
          <div>${p}</div>
          <div class="tag">Hết hạn: ${exp}</div>
        </div>
        <div class="${ok?'good':'bad'}">
          ${ok?'✔ Còn hạn':'✖ Hết hạn'}
        </div>
      </div>`;
  });
}

/* ===== HELPERS ===== */
function phoneInput(){ return document.getElementById("phone").value.trim(); }
function daysInput(){ return document.getElementById("days").value; }
</script>
</body>
</html>
